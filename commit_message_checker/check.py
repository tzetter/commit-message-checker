#!/usr/local/bin/python3
import re
import sys

subject_max_length = 72

frequent_verbs = (
    'highlight',
    'abandon',
    'abolish',
    'absorb',
    'abuse',
    'accelerate',
    'accept',
    'access',
    'accommodate',
    'accompany',
    'accomplish',
    'account',
    'accumulate',
    'accuse',
    'ache',
    'achieve',
    'acknowledge',
    'acquire',
    'act',
    'activate',
    'active',
    'adapt',
    'add',
    'address',
    'adhere',
    'adjust',
    'administer',
    'admire',
    'admit',
    'adopt',
    'advance',
    'advertise',
    'advise',
    'advocate',
    'affect',
    'affirm',
    'afford',
    'age',
    'agree',
    'aid',
    'aim',
    'alarm',
    'alert',
    'align',
    'allege',
    'allocate',
    'allow',
    'alter',
    'amend',
    'amount',
    'analyse',
    'analyze',
    'announce',
    'annoy',
    'annul',
    'answer',
    'anticipate',
    'apologize',
    'appeal',
    'appear',
    'applaud',
    'applicate',
    'apply',
    'appoint',
    'appreciate',
    'approach',
    'approve',
    'argue',
    'arise',
    'arm',
    'arrange',
    'arrest',
    'arrive',
    'articulate',
    'ask',
    'aspire',
    'assault',
    'assemble',
    'assert',
    'assess',
    'assign',
    'assist',
    'associate',
    'assume',
    'assure',
    'astonish',
    'attach',
    'attack',
    'attain',
    'attempt',
    'attend',
    'attract',
    'attribute',
    'authorize',
    'average',
    'avoid',
    'await',
    'awake',
    'award',
    'back',
    'backup',
    'bake',
    'balance',
    'ban',
    'bar',
    'base',
    'bat',
    'battle',
    'be',
    'bear',
    'beat',
    'become',
    'beg',
    'begin',
    'behave',
    'believe',
    'belong',
    'bend',
    'benefit',
    'bet',
    'betray',
    'better',
    'beware',
    'bid',
    'bill',
    'bind',
    'bite',
    'blacklist',
    'blame',
    'blast',
    'bleed',
    'blend',
    'bless',
    'block',
    'blow',
    'board',
    'boast',
    'boil',
    'bomb',
    'book',
    'boost',
    'border',
    'born',
    'borrow',
    'bother',
    'bounce',
    'bow',
    'brand',
    'breach',
    'break',
    'breathe',
    'breed',
    'bring',
    'broadcast',
    'brush',
    'build',
    'bump',
    'burn',
    'burst',
    'bury',
    'busy',
    'buy',
    'cache',
    'calculate',
    'call',
    'calm',
    'camp',
    'campaign',
    'cancel',
    'capture',
    'care',
    'carry',
    'carryout',
    'carve',
    'cast',
    'catch',
    'categorize',
    'cater',
    'cause',
    'cease',
    'celebrate',
    'centre',
    'chain',
    'chair',
    'challenge',
    'change',
    'chant',
    'characterize',
    'charge',
    'chart',
    'chase',
    'chat',
    'cheat',
    'check',
    'cheer',
    'choose',
    'chop',
    'circle',
    'circulate',
    'cite',
    'claim',
    'clarify',
    'classify',
    'clean',
    'cleanse',
    'clear',
    'click',
    'climb',
    'cling',
    'close',
    'clothe',
    'coach',
    'coincide',
    'collaborate',
    'collapse',
    'collect',
    'combat',
    'combine',
    'come',
    'comfort',
    'command',
    'commence',
    'comment',
    'commission',
    'commit',
    'communicate',
    'compare',
    'compel',
    'compensate',
    'compete',
    'compile',
    'complain',
    'complement',
    'complete',
    'comply',
    'compose',
    'compress',
    'comprise',
    'compromise',
    'compute',
    'conceal',
    'concede',
    'conceive',
    'concentrate',
    'concern',
    'conclude',
    'concur',
    'condemn',
    'conduct',
    'confer',
    'confess',
    'configure',
    'confine',
    'confirm',
    'conflict',
    'confront',
    'confuse',
    'congratulate',
    'connect',
    'connote',
    'conquer',
    'consent',
    'conserve',
    'consider',
    'consist',
    'consolidate',
    'constitute',
    'construct',
    'consult',
    'consume',
    'contact',
    'contain',
    'contemplate',
    'contend',
    'contest',
    'continue',
    'contract',
    'contrast',
    'contribute',
    'control',
    'convert',
    'convey',
    'convict',
    'convince',
    'cook',
    'cool',
    'cooperate',
    'coordinate',
    'cope',
    'copy',
    'correct',
    'correlate',
    'correspond',
    'cost',
    'counsel',
    'count',
    'counter',
    'cover',
    'crack',
    'craft',
    'crash',
    'crawl',
    'create',
    'credit',
    'creep',
    'criticize',
    'cross',
    'cruise',
    'crush',
    'cry',
    'cultivate',
    'cure',
    'curve',
    'cut',
    'cycle',
    'damage',
    'dance',
    'dare',
    'date',
    'deal',
    'debate',
    'decide',
    'declare',
    'decline',
    'deconstruct',
    'decorate',
    'decrease',
    'deem',
    'defeat',
    'defend',
    'defer',
    'define',
    'defy',
    'delay',
    'delete',
    'delight',
    'deliver',
    'demand',
    'demolish',
    'demonstrate',
    'denounce',
    'deny',
    'depart',
    'depend',
    'depict',
    'deploy',
    'deposit',
    'deprive',
    'derive',
    'descend',
    'describe',
    'desert',
    'deserve',
    'design',
    'designate',
    'desire',
    'destroy',
    'detail',
    'detain',
    'detect',
    'deteriorate',
    'determine',
    'devastate',
    'develop',
    'devise',
    'devote',
    'diagnose',
    'dictate',
    'die',
    'differ',
    'differentiate',
    'dig',
    'diminish',
    'dip',
    'direct',
    'disable',
    'disagree',
    'disappear',
    'disappoint',
    'discard',
    'discharge',
    'disclose',
    'discount',
    'discourage',
    'discover',
    'discuss',
    'dislike',
    'dismiss',
    'displace',
    'display',
    'dispose',
    'dispute',
    'disrupt',
    'dissolve',
    'distinguish',
    'distort',
    'distract',
    'distress',
    'distribute',
    'disturb',
    'dive',
    'divert',
    'divide',
    'divorce',
    'do',
    'document',
    'dominate',
    'donate',
    'double',
    'doubt',
    'downgrade',
    'download',
    'draft',
    'drag',
    'drain',
    'draw',
    'dread',
    'dream',
    'dress',
    'drift',
    'drill',
    'drink',
    'drive',
    'drop',
    'drown',
    'dry',
    'dub',
    'dump',
    'earn',
    'ease',
    'eat',
    'echo',
    'edit',
    'educate',
    'elect',
    'elevate',
    'eliminate',
    'email',
    'embark',
    'embed',
    'embody',
    'embrace',
    'emerge',
    'emphasize',
    'employ',
    'empower',
    'empty',
    'enable',
    'enact',
    'encompass',
    'encounter',
    'encourage',
    'end',
    'endorse',
    'endure',
    'enforce',
    'engage',
    'enhance',
    'enjoy',
    'enquire',
    'enrich',
    'enrol',
    'enroll',
    'ensue',
    'ensure',
    'enter',
    'entertain',
    'entitle',
    'enumerate',
    'equal',
    'equate',
    'equip',
    'erase',
    'erect',
    'erupt',
    'escalate',
    'escape',
    'establish',
    'estimate',
    'evacuate',
    'evaluate',
    'evoke',
    'evolve',
    'exaggerate',
    'examine',
    'exceed',
    'except',
    'exchange',
    'exclude',
    'excuse',
    'execute',
    'exercise',
    'exert',
    'exhibit',
    'exist',
    'exit',
    'expand',
    'expect',
    'experience',
    'experiment',
    'expire',
    'explain',
    'explode',
    'exploit',
    'explore',
    'export',
    'expose',
    'express',
    'extend',
    'extract',
    'face',
    'facilitate',
    'fade',
    'fail',
    'fall',
    'fancy',
    'farm',
    'fasten',
    'fault',
    'favour',
    'fear',
    'feature',
    'feed',
    'feel',
    'fetch',
    'fight',
    'figure',
    'file',
    'fill',
    'film',
    'filter',
    'finance',
    'find',
    'fine',
    'finish',
    'fire',
    'fish',
    'fit',
    'fix',
    'flash',
    'flatten',
    'flee',
    'float',
    'flood',
    'flourish',
    'flow',
    'flunk',
    'fly',
    'focus',
    'fold',
    'follow',
    'forbid',
    'force',
    'forecast',
    'foresee',
    'forge',
    'forget',
    'forgive',
    'form',
    'format',
    'formulate',
    'forward',
    'foster',
    'found',
    'frame',
    'free',
    'freeze',
    'frighten',
    'fry',
    'fuel',
    'fulfil',
    'function',
    'fund',
    'gain',
    'gather',
    'gaze',
    'generate',
    'get',
    'gitignore',
    'give',
    'giveup',
    'glance',
    'go',
    'going',
    'govern',
    'grab',
    'grade',
    'graduate',
    'grant',
    'grasp',
    'greet',
    'grin',
    'grind',
    'grip',
    'grow',
    'guarantee',
    'guard',
    'guess',
    'guide',
    'hail',
    'halt',
    'hand',
    'handle',
    'hang',
    'happen',
    'harm',
    'harvest',
    'hate',
    'haunt',
    'have',
    'head',
    'heal',
    'hear',
    'heat',
    'heighten',
    'help',
    'hesitate',
    'hide',
    'highlight',
    'hint',
    'hire',
    'hit',
    'hold',
    'honour',
    'hook',
    'hop',
    'hope',
    'host',
    'house',
    'hug',
    'hunt',
    'hurry',
    'hurt',
    'identify',
    'ignore',
    'illuminate',
    'illustrate',
    'imagine',
    'impact',
    'implement',
    'imply',
    'import',
    'importune',
    'impose',
    'impress',
    'imprison',
    'improve',
    'in-line',
    'include',
    'incorporate',
    'increase',
    'incur',
    'indicate',
    'induce',
    'indulge',
    'infect',
    'infer',
    'inflict',
    'influence',
    'inform',
    'inherit',
    'inhibit',
    'initialize',
    'initiate',
    'inject',
    'injure',
    'inline',
    'insert',
    'insist',
    'inspect',
    'inspire',
    'install',
    'instruct',
    'insult',
    'integrate',
    'intend',
    'intensify',
    'interact',
    'intercept',
    'interest',
    'interfere',
    'internalize',
    'interpret',
    'interrupt',
    'intervene',
    'interview',
    'introduce',
    'invade',
    'invalidate',
    'invent',
    'invest',
    'investigate',
    'invite',
    'invoke',
    'involve',
    'iron',
    'isolate',
    'issue',
    'jail',
    'join',
    'joke',
    'journey',
    'joy',
    'judge',
    'jump',
    'justify',
    'keep',
    'key',
    'kick',
    'kidnap',
    'kill',
    'kiss',
    'knock',
    'know',
    'label',
    'lack',
    'land',
    'last',
    'laugh',
    'launch',
    'lay',
    'lead',
    'leak',
    'lean',
    'leap',
    'learn',
    'leave',
    'lecture',
    'lend',
    'let',
    'level',
    'license',
    'lie',
    'lift',
    'light',
    'like',
    'limit',
    'line',
    'linger',
    'link',
    'list',
    'listen',
    'live',
    'load',
    'lobby',
    'locate',
    'lock',
    'log',
    'look',
    'loom',
    'lose',
    'love',
    'lower',
    'mail',
    'maintain',
    'make',
    'manage',
    'manifest',
    'manipulate',
    'manufacture',
    'map',
    'march',
    'mark',
    'market',
    'marry',
    'master',
    'match',
    'mate',
    'materialize',
    'matter',
    'mature',
    'maximize',
    'mean',
    'measure',
    'meet',
    'melt',
    'menace',
    'mention',
    'merge',
    'migrate',
    'mind',
    'minimize',
    'misinform',
    'miss',
    'mistake',
    'mix',
    'mobilize',
    'mock',
    'model',
    'modify',
    'monitor',
    'motivate',
    'mount',
    'move',
    'multiply',
    'murder',
    'mutate',
    'name',
    'narrow',
    'near',
    'need',
    'neglect',
    'negotiate',
    'nod',
    'nominate',
    'note',
    'notice',
    'notify',
    'number',
    'obey',
    'object',
    'oblige',
    'observe',
    'obsess',
    'obtain',
    'occupy',
    'occur',
    'offend',
    'offer',
    'officiate',
    'omit',
    'open',
    'operate',
    'oppose',
    'opt',
    'optimize',
    'order',
    'organise',
    'organize',
    'originate',
    'ought',
    'outline',
    'outrage',
    'overcome',
    'overlook',
    'override',
    'oversee',
    'overtake',
    'overturn',
    'overwhelm',
    'owe',
    'own',
    'pace',
    'pack',
    'package',
    'paint',
    'park',
    'partake',
    'participate',
    'pass',
    'patch',
    'patrol',
    'pause',
    'pay',
    'peel',
    'perceive',
    'perform',
    'permit',
    'persist',
    'persuade',
    'phone',
    'photograph',
    'pick',
    'picture',
    'pile',
    'pin',
    'pinch',
    'pioneer',
    'place',
    'plan',
    'plant',
    'play',
    'plead',
    'please',
    'pledge',
    'plot',
    'plow',
    'plug',
    'plunge',
    'point',
    'poison',
    'ponder',
    'pop',
    'portray',
    'pose',
    'position',
    'possess',
    'post',
    'postpone',
    'pour',
    'power',
    'practice',
    'practise',
    'praise',
    'pray',
    'preach',
    'precede',
    'predict',
    'prefer',
    'prepare',
    'prescribe',
    'present',
    'preserve',
    'preside',
    'press',
    'presume',
    'pretend',
    'prevail',
    'prevent',
    'price',
    'print',
    'privatize',
    'probe',
    'proceed',
    'process',
    'proclaim',
    'procure',
    'produce',
    'program',
    'progress',
    'prohibit',
    'project',
    'promise',
    'promote',
    'prompt',
    'pronounce',
    'propose',
    'prosecute',
    'protect',
    'protest',
    'prove',
    'provide',
    'provoke',
    'publish',
    'pull',
    'pump',
    'punch',
    'punish',
    'purchase',
    'pursue',
    'push',
    'put',
    'puton',
    'qualify',
    'question',
    'queue',
    'quit',
    'quote',
    'race',
    'raid',
    'rain',
    'raise',
    'rally',
    'randomize',
    'range',
    'rank',
    'rape',
    'rate',
    're-define',
    're-do',
    're-instate',
    'reach',
    'react',
    'read',
    'realise',
    'realize',
    'reason',
    'reassure',
    'rebase',
    'rebuild',
    'recall',
    'receive',
    'reckon',
    'recognise',
    'recognize',
    'recollect',
    'recommend',
    'record',
    'recount',
    'recover',
    'recruit',
    'recur',
    'recycle',
    'rede',
    'redefine',
    'redirect',
    'redo',
    'reduce',
    'refactor',
    'refer',
    'reference',
    'reflect',
    'reform',
    'reformat',
    'refresh',
    'refuse',
    'regain',
    'regard',
    'register',
    'regret',
    'regulate',
    'reign',
    'reinforce',
    'reinstate',
    'reject',
    'relate',
    'relax',
    'release',
    'relieve',
    'rely',
    'remain',
    'remark',
    'remember',
    'remind',
    'remove',
    'rename',
    'render',
    'renew',
    'rent',
    'reorder',
    'reorganise',
    'reorganize',
    'repair',
    'repeat',
    'repel',
    'rephrase',
    'replace',
    'reply',
    'report',
    'represent',
    'reproduce',
    'request',
    'require',
    'rescue',
    'research',
    'resemble',
    'reserve',
    'reside',
    'resign',
    'resist',
    'resolve',
    'respect',
    'respond',
    'rest',
    'restore',
    'restrict',
    'restructure',
    'result',
    'resume',
    'retain',
    'retire',
    'retreat',
    'retrieve',
    'return',
    'reveal',
    'reverse',
    'revert',
    'review',
    'revise',
    'revive',
    'reward',
    'reword',
    'rewrap',
    'rewrite',
    'rid',
    'ride',
    'ring',
    'rip',
    'rise',
    'risk',
    'roast',
    'rob',
    'rock',
    'roll',
    'rotate',
    'rub',
    'ruin',
    'rule',
    'run',
    'rush',
    'sack',
    'sacrifice',
    'sail',
    'sale',
    'salute',
    'sample',
    'sanction',
    'satisfy',
    'save',
    'say',
    'scan',
    'scare',
    'schedule',
    'score',
    'scratch',
    'scream',
    'screen',
    'screw',
    'scrub',
    'seal',
    'search',
    'seat',
    'secure',
    'see',
    'seek',
    'seem',
    'seize',
    'select',
    'self-initialize',
    'sell',
    'send',
    'sense',
    'sentence',
    'separate',
    'serve',
    'set',
    'settle',
    'sew',
    'shake',
    'shape',
    'share',
    'shatter',
    'shed',
    'shelter',
    'shift',
    'shine',
    'ship',
    'shock',
    'shoot',
    'shop',
    'shout',
    'show',
    'shrink',
    'shrug',
    'shut',
    'sigh',
    'sign',
    'signal',
    'signify',
    'silence',
    'simplify',
    'simulate',
    'sing',
    'sink',
    'sit',
    'ski',
    'skip',
    'slam',
    'slap',
    'slash',
    'sleep',
    'slice',
    'slide',
    'slip',
    'slope',
    'slow',
    'smash',
    'smell',
    'smile',
    'smoke',
    'snap',
    'snow',
    'soak',
    'soar',
    'solve',
    'sort',
    'sound',
    'span',
    'spare',
    'spark',
    'speak',
    'specialize',
    'specify',
    'speculate',
    'speed',
    'spell',
    'spend',
    'spill',
    'spin',
    'spit',
    'split',
    'spoil',
    'sponsor',
    'spot',
    'spread',
    'spring',
    'spy',
    'squeeze',
    'stab',
    'stabilize',
    'stack',
    'stage',
    'stand',
    'standardize',
    'star',
    'stare',
    'start',
    'starve',
    'state',
    'stay',
    'steal',
    'steer',
    'stem',
    'step',
    'stick',
    'stimulate',
    'sting',
    'stink',
    'stir',
    'stop',
    'store',
    'strengthen',
    'stress',
    'stretch',
    'strike',
    'strip',
    'strive',
    'structure',
    'struggle',
    'study',
    'stuff',
    'stumble',
    'stun',
    'submit',
    'substitute',
    'succeed',
    'suck',
    'sue',
    'suffer',
    'suggest',
    'suit',
    'sum',
    'summarize',
    'supervise',
    'supplement',
    'supply',
    'support',
    'suppose',
    'suppress',
    'surge',
    'surprise',
    'surrender',
    'surround',
    'survey',
    'survive',
    'suspect',
    'suspend',
    'sustain',
    'swallow',
    'sway',
    'swear',
    'sweep',
    'swell',
    'swim',
    'swing',
    'switch',
    'sync',
    'synchronise',
    'synchronize',
    'tackle',
    'tag',
    'take',
    'talk',
    'talkover',
    'tap',
    'target',
    'taste',
    'tax',
    'teach',
    'tear',
    'telephone',
    'tell',
    'tempt',
    'tend',
    'term',
    'terminate',
    'terrify',
    'test',
    'testify',
    'text',
    'thank',
    'think',
    'threaten',
    'thrive',
    'throw',
    'tidy',
    'tie',
    'tighten',
    'time',
    'tip',
    'title',
    'tolerate',
    'top',
    'torture',
    'toss',
    'total',
    'touch',
    'tour',
    'trace',
    'track',
    'trade',
    'trail',
    'train',
    'transfer',
    'transform',
    'translate',
    'transmit',
    'transport',
    'trap',
    'travel',
    'tread',
    'treat',
    'trick',
    'trigger',
    'trim',
    'trip',
    'trouble',
    'trust',
    'try',
    'turn',
    'tweak',
    'twist',
    'type',
    'uncover',
    'undergo',
    'undermine',
    'understand',
    'undertake',
    'undo',
    'unfold',
    'unify',
    'unite',
    'unload',
    'unpack',
    'unskip',
    'unveil',
    'unwrap',
    'update',
    'upgrade',
    'uphold',
    'upset',
    'urge',
    'use',
    'utilize',
    'utter',
    'vacuum',
    'value',
    'vanish',
    'vary',
    'venture',
    'verify',
    'view',
    'violate',
    'visit',
    'vocalize',
    'voice',
    'volunteer',
    'vote',
    'vow',
    'wait',
    'wake',
    'walk',
    'wander',
    'want',
    'warm',
    'warn',
    'warrant',
    'wash',
    'waste',
    'watch',
    'water',
    'wave',
    'weaken',
    'wear',
    'weave',
    'weep',
    'weigh',
    'welcome',
    'whip',
    'whisper',
    'whitelist',
    'widen',
    'win',
    'wind',
    'wipe',
    'wish',
    'withdraw',
    'witness',
    'wonder',
    'work',
    'workout',
    'worry',
    'worship',
    'wound',
    'wrap',
    'writ',
    'write',
    'yell',
    'yield',
)

suffix_hash_code_re = r'\s?\(\s*#[a-zA-Z_0-9]+\s*\)$'

def check_subject(subject: str, verbs: list[str]):
    errors = []

    subject_wo_code = re.sub(suffix_hash_code_re, '', subject)

    if len(subject_wo_code) > subject_max_length:
        errors.append(
            f"The subject exceeds the limit of {subject_max_length} characters " +
            f"(got: {len(subject_wo_code)}): {subject_wo_code}). \n" +
            "Please shorten the subject to make it more succinct."
        )

    first_word = subject.split(' ', 1)[0]
    if not first_word:
        errors.append(
            "Expected the subject to start with a verb in imperative mood " +
            "consisting of letters and possibly dashes in-between, " +
            f"but the subject was: {subject_wo_code}. \n" +
            "Please re-write the subject so that it starts with " +
            "a verb in imperative mood."
        )
    else:
        capitalized = first_word.capitalize()
        if capitalized != first_word:
            errors.append(
                "The subject must start with a capitalized word, " +
                f"but the current first word is: {first_word}. \n" +
                f"Please capitalize to: {capitalized}."
            )


        first_word_lower = first_word.lower()

        if first_word_lower not in verbs:
            errors.append(
                "The subject must start with a verb in imperative mood (according to a whitelist), " +
                f"but got: {first_word}."
            )

    if subject_wo_code.endswith('.'):
        errors.append(
            "The subject must not end with a dot ('.'). \n" +
            "Please remove the trailing dot(s)."
        )

    return errors

url_line_re = r'^[^ ]+://[^ ]+$'
link_definition_re = r'^\[[^\]]+]\s*:\s*[^ ]+://[^ ]+$'

def check_body(subject: str, body_lines: list[str]):
    errors = []

    if len(body_lines) == 0:
        errors.append("At least one line is expected in the body, but got empty body.")
        return errors

    if len(body_lines) == 1 and body_lines[0].strip() == "":
        errors.append("Unexpected empty body")
        return errors

    for i, line in enumerate(body_lines):
        if re.match(url_line_re, line) or re.match(link_definition_re, line):
            continue

        if len(line) > 72:
            errors.append(
                f"The line {i + 3} of the message (line {i + 1} of the body) " +
                f"exceeds the limit of 72 characters. The line contains {len(line)} characters: " +
                "{line}. " +
                "Please reformat the body so that all the lines fit 72 characters."
            )

    body_first_word = body_lines[0].split(' ', 1)[0]
    if body_first_word:
        subject_first_word = subject.split(' ', 1)[0]
        if subject_first_word:
            if subject_first_word.lower() == body_first_word.lower():
                errors.append(
                    f"The first word of the subject ({subject_first_word}) must not match " +
                    "the first word of the body. " +
                    "Please make the body more informative by adding more information instead of repeating " +
                    "the subject. For example, start by explaining the problem that this change is " +
                    'intendended to solve or what was previously missing (e.g., "Previously, ....").'
                )

    return errors

def check(text, verbs):
    errors = []
    if text.startswith("Merge branch"):
        return errors

    trimmed_lines = [line.strip() for line in text.split('\n')]

    if not trimmed_lines:
        errors.append("The message is empty.")
        return errors

    subject = trimmed_lines[0]
    errors += check_subject(subject, verbs)

    if len(trimmed_lines) > 2:
        errors += check_body(subject, trimmed_lines[2:])

    return errors

def get_commit_message():
    if len(sys.argv) > 0:
        if '.git' in sys.argv[1]:
            with open(sys.argv[1], "r") as f:
                return f.read()
        return ' '.join(sys.argv[1:])

def check_commit_message():
    message = get_commit_message()
    if not message:
        print('Commit message not found')
        sys.exit()

    message_errors = check(message, frequent_verbs)

    if len(message_errors) == 0:
        print("The message is OK.")
    else:
        for error in message_errors:
            print(error)
        sys.exit(1)

if __name__ == '__main__':
    check_commit_message()
